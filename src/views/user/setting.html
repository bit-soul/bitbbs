<%- partial('../sidebar') %>

<div id='content'>
  <div class='panel'>
    <div class='header'>
      <ul class='breadcrumb'>
        <li><a href='/'>Home</a><span class='divider'>/</span></li>
        <li class='active'>Setting</li>
      </ul>
    </div>
    <div class='inner'>
      <% if(typeof(error) !== 'undefined' && error){ %>
      <div class="alert alert-error">
        <a class="close" data-dismiss="alert" href="#">&times;</a>
        <strong><%= error %></strong>
      </div>
      <% } %>
      <% if (typeof(success) !== 'undefined' && success) { %>
      <div class="alert alert-success">
        <strong><%= success %></strong>
      </div>
      <% } %>
      <form id='setting_form' class='form-horizontal' action='/setting' method='post'>
        <div class='control-group'>
          <label class='control-label' for='name'>Name</label>

          <div class='controls'>
            <input class='input-xlarge readonly' id='name' name='name' size='30' type='text' value="<%= name %>" readonly="readonly"/>
          </div>
        </div>
        <!--<div class='control-group'>
          <label class='control-label' for='email'>电子邮件</label>

          <div class='controls'>
            <input class='input-xlarge readonly' id='email' name='email' size='30' type='text'
                   readonly='true' value="<%= email %>"/>

            <p>同时决定了 Gravatar 头像</p>
          </div>
        </div>-->
        <!--div class='control-group'>
          <label class='control-label' for='github'>GitHub</label>

          <div class='controls'>
            <input class='input-xlarge' id='github' name='github' size='30' type='text'
                   value="<%= typeof(githubUsername) !== 'undefined' ? '@' + githubUsername : '' %>" placeholder="@username" readonly="readonly" />
            <p>请通过 GitHub 登陆来修改此处</p>
          </div>
        </div>-->
        <div class='control-group'>
          <label class='control-label' for='biog'>Biog</label>

          <div class='controls'>
            <textarea class='input-xlarge readonly' id='biog' name='biog' size='30' readonly="readonly"><%= typeof(biog) !== 'undefined' ? biog : "" %></textarea>
          </div>
        </div>
        <input type='hidden' id='action' name='action' value='change_setting'/>
        <input type='hidden' name='_csrf' value='<%= csrf %>'/>

        <div class='form-actions'>
          <input type='submit' class='span-primary submit_btn' data-loading-text="Saving.." value='Save'/>
          &nbsp;
          <a href="https://dapp.bitsoul.xyz" target="_blank" style="text-decoration: underline;">Not supported to change it here now, Please click to go to bitsoul to edit.</a>
        </div>
      </form>

      <div style='padding-left: 180px'>
        <button class='span-primary' onclick='get_authkey()'>get login authkey</button>
      </div>
    </div>
  </div>

  <!--<div class='panel'>
    <div class='header'>
      <span class='col_fade'>更改密码</span>
    </div>
    <div class='inner'>
      <form id='change_pass_form' class='form-horizontal' action='/setting' method='post'>
        <div class='control-group'>
          <label class='control-label' for='old_pass'>当前密码</label>

          <div class='controls'>
            <input class='input-xlarge' type='password' id='old_pass' name='old_pass' size='30'/>
          </div>
        </div>
        <div class='control-group'>
          <label class='control-label' for='new_pass'>新密码</label>

          <div class='controls'>
            <input class='input-xlarge' type='password' id='new_pass' name='new_pass' size='30'/>
          </div>
        </div>
        <input type='hidden' id='action' name='action' value='change_password'/>
        <input type='hidden' name='_csrf' value='<%= csrf %>'/>

        <div class='form-actions'>
          <input type='submit' class='span-primary submit_btn' data-loading-text="更改中.." value='更改密码'/>
        </div>
      </form>
    </div>
  </div>-->

  <!--<div class='panel'>
    <div class='header'>
      <span class='col_fade'>Access Token</span>
    </div>
    <div class='inner'>
      <div>
        <input type='button' class='span-primary refreshToken' value='刷新Token'/>
      </div>
      <div>
        <span>字符串：</span>
        <span id="accessToken"><%- accessToken %></span>
      </div>
      <div>
        <span>二维码：</span>
        <span id="access-token-qrcode"></span>
      </div>
    </div>
  </div>
</div>-->

<script type="text/javascript">
//  $(function() {
//    // qrcode generate
//    var accessToken = "<%- accessToken %>";
//    var qrcode = new QRCode(document.getElementById("access-token-qrcode"), {
//      text: accessToken,
//      width: 200,
//      height: 200,
//    });
//    // END qrcode generate
//
//    // refreshToken
//    $(".refreshToken").on("click", function() {
//      $.post("/user/refresh_token", function(result) {
//        if (result.status === 'success') {
//          $("#accessToken").text(result.accessToken);
//          qrcode.makeCode(result.accessToken)
//        } else {
//          alert(result.message);
//        }
//      })
//    })
//   });
</script>
